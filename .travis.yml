sudo: required

addons:
  hosts:
    - MyZabbixServer

services:
  - docker

before_install:
- docker pull zabbix/zabbix-appliance:ubuntu-4.0-latest
- docker run --name myZabbix -p 43210:80 -d zabbix/zabbix-appliance:ubuntu-4.0-latest
- docker ps -a
- until curl --fail --silent --request POST --url http://MyZabbixServer:43210/api_jsonrpc.php  --header 'Content-Type: application/json'  --data '{"jsonrpc": "2.0", "method": "apiinfo.version", "params": [], "id": 1}'; do printf '.'; sleep 1; done

language: csharp
mono: none
solution: ZabbixApi.sln
dotnet: 2.1.3
script:
 - dotnet build -f netstandard2.0
 - dotnet test -f netcoreapp2.0 ZabbixApiTests